# 実装計画

## Phase 1: プレイヤー名入力機能の実装

- [ ] 1. プレイヤー名管理機能の実装
- [x] 1.1 プレイヤー名の更新機能を実装
  - プレイヤー名を動的に変更できる状態管理機能を追加
  - 名前変更時に状態を即座に更新する仕組みを実装
  - プレイヤー追加時にデフォルト名（「プレイヤー1」等）を自動設定
  - 既存のタイマー機能に影響を与えない設計
  - _要件: 1.1, 1.2, 1.4, 1.5_

- [ ] 1.2 プレイヤー名入力UIの実装
  - 各プレイヤーカードに名前入力フィールドを追加
  - 入力フィールドをクリック時にテキスト入力を可能にする
  - 入力内容を即座にプレイヤー表示領域に反映
  - プレイヤー名が未設定の場合はデフォルト名を表示
  - 入力フィールドのスタイリングとフォーカス管理
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 1.3 プレイヤー名機能のテストと検証
  - TDD: プレイヤー名更新機能のテストケースを作成（RED phase）
  - 最小限の実装でテストをパス（GREEN phase）
  - 必要に応じてリファクタリング（REFACTOR phase）
  - Chrome DevTools MCPで実機検証（名前入力、即時反映、デフォルト名）
  - 全テストが成功することを確認
  - _要件: 1.1, 1.2, 1.3, 1.4, 1.5_

## Phase 2: UI配置の最適化

- [ ] 2. 次のプレイヤーボタンの配置改善
- [ ] 2.1 ボタン配置の最適化
  - 次のプレイヤーボタンをゲームコントロールエリアの最上部に移動
  - 最も視認しやすく操作しやすい位置に配置
  - ボタンクリック時のターン切り替え機能が即座に実行されることを確認
  - _要件: 2.1, 2.2, 2.4_

- [ ] 2.2 レスポンシブレイアウトの調整
  - スマートフォン、タブレット、PCの全デバイスで適切に表示
  - すべての画面サイズでスクロールなしでボタンにアクセス可能
  - ボタンとタイマー表示の読みやすいフォントサイズを維持
  - _要件: 2.2, 2.3, 5.4_

- [ ] 2.3 UI配置のテストと検証
  - TDD: ボタン配置とレスポンシブデザインのテストケースを作成
  - Chrome DevTools MCPで各デバイスサイズ（375px、768px、1024px）を検証
  - ボタンのアクセシビリティとターン切り替え動作を確認
  - 全テストが成功することを確認
  - _要件: 2.1, 2.2, 2.3, 2.4, 5.4_

## Phase 3: UI簡素化と条件付き表示

- [ ] 3. UI簡素化と条件付きレンダリング
- [ ] 3.1 不要なUI要素の削除
  - アクティブ解除ボタンをゲームコントロールUIから削除
  - 一時停止ボタンで代替可能であることを確認
  - 冗長なゲーム状態情報（現在のゲーム状態テキスト）を非表示
  - アクティブプレイヤー、一時停止状態、プレイヤー数は視覚的表現で伝達
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 3.2 条件付きレンダリングの実装
  - カウントアップモード選択時にカウントダウン秒数設定UIを非表示
  - カウントダウンモード選択時にカウントダウン秒数設定UIを表示
  - タイマーモード切り替え時に関連UI要素の表示・非表示を即座に切り替え
  - カウントアップモード時にカウントダウン専用設定項目を一切表示しない
  - _要件: 4.1, 4.2, 4.3, 4.4_

- [ ] 3.3 UI簡素化と条件付き表示のテストと検証
  - TDD: UI簡素化と条件付きレンダリングのテストケースを作成
  - Chrome DevTools MCPで不要UI削除と条件付き表示を検証
  - タイマーモード切り替え動作を確認
  - 全テストが成功することを確認
  - _要件: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 4.4_

## Phase 4: 統合テストと最終検証

- [ ] 4. 全機能の統合と検証
- [ ] 4.1 全機能の統合テスト
  - すべての新機能（プレイヤー名入力、UI配置、UI簡素化）が連携して動作することを確認
  - プレイヤー名変更、ターン切り替え、タイマーモード切り替えの一連のフローをテスト
  - エラーや予期しない動作が発生しないことを検証
  - _要件: 5.1, 5.2, 5.3_

- [ ] 4.2 既存機能との整合性確認
  - 既存のタイマー計測機能（カウントアップ/カウントダウン）に影響がないことを確認
  - 既存のターン管理機能（次のプレイヤー、アクティブプレイヤー表示）が正常に連携
  - 既存のゲームコントロール機能（リセット、一時停止、再開）が正常に動作
  - レスポンシブデザインが維持されていることを確認
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [ ] 4.3 Chrome DevToolsでの全体検証
  - Chrome DevTools MCPで全ての受入基準が満たされていることを最終確認
  - プレイヤー名入力、UI配置、UI簡素化、条件付き表示のすべての機能を検証
  - 各デバイスサイズ（モバイル、タブレット、PC）での動作確認
  - すべてのテストが成功し、リグレッションがないことを確認
  - _要件: 全要件（1.1〜5.4）_

## 注意事項

### TDD実装プロセス（必須）
各タスクの実装時は以下のTDDプロセスに従うこと：
1. **RED phase**: 実装前にテストケースを作成
2. **GREEN phase**: 最小限の実装でテストをパス
3. **REFACTOR phase**: 必要に応じてリファクタリング
4. `npm test`で全テストが成功することを確認

### Chrome DevTools検証プロセス（必須）
実装完了後、以下の手順で実機検証を実施：
1. `npm run dev`で開発サーバー起動
2. `mcp__chrome-devtools__navigate_page`でアプリケーションにアクセス
3. `mcp__chrome-devtools__take_snapshot`で初期状態確認
4. 実装した機能の操作（`click`, `fill`, `evaluate_script`等）
5. 各操作後に`take_snapshot`で状態変化を確認
6. タイマー動作は`Bash(sleep N)`後にスナップショットで時間経過を確認

### タスク完了とコミットプロセス（必須）
検証完了後、以下を必ず実施：
1. `tasks.md`の該当タスクをチェック済み`[x]`に変更
2. 詳細なコミットメッセージでGitコミット作成
3. 即座にコミット（複数タスクをまとめない）

### 要件トレーサビリティ
- **要件1（プレイヤー名入力）**: Task 1.1, 1.2, 1.3
- **要件2（UI配置最適化）**: Task 2.1, 2.2, 2.3
- **要件3（UI簡素化）**: Task 3.1, 3.3
- **要件4（条件付きUI表示）**: Task 3.2, 3.3
- **要件5（既存機能整合性）**: Task 1.1, 2.2, 4.1, 4.2, 4.3

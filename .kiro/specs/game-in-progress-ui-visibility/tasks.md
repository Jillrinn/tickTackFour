# 実装タスク

## Phase 1: プレイヤーカードの視認性改善

- [ ] 1. 非アクティブプレイヤーカードの境界を明確化する
- [ ] 1.1 カード境界のスタイル強化
  - カードのボーダー幅を2pxから3pxに変更
  - ボーダー色を薄いグレー（#e0e0e0）から中間グレー（#9e9e9e）に変更
  - 白背景（#ffffff）との十分なコントラスト比を確保
  - _Requirements: FR2.1, FR2.2_

- [ ] 1.2 非アクティブカードのテキストコントラスト向上
  - プレイヤー名のテキスト色を#333から#212121に変更
  - タイマー表示のテキスト色を#555から#212121に変更
  - 白背景に対して4.5:1以上のコントラスト比を達成
  - _Requirements: NFR1.1_

- [ ] 2. アクティブプレイヤーカードの強調表示を改善する
- [ ] 2.1 アクティブカードの背景とボーダーを濃い色に変更
  - カード背景色を淡い緑（#f1f8e9）から青（#1976d2）に変更
  - カードボーダー色を緑（#4caf50）から青（#1976d2）に変更
  - アクティブ状態の視覚的区別を明確化
  - _Requirements: FR1.2_

- [ ] 2.2 アクティブカード内のテキストを白色に変更
  - プレイヤー名のテキスト色を白（#ffffff）に設定
  - タイマー表示のテキスト色を白（#ffffff）に設定
  - 青背景（#1976d2）に対して4.5:1以上のコントラスト比を達成
  - _Requirements: FR1.1, NFR1.1_

## Phase 2: ゲームタイマーUIの視認性改善

- [ ] 3. 固定ヘッダーのテキストコントラストを向上させる
- [ ] 3.1 アクティブプレイヤー名表示の色調整
  - プレイヤー名のテキスト色を#1976d2から#0d47a1に変更
  - 白背景（rgba(255, 255, 255, 0.98)）に対するコントラスト比を向上
  - _Requirements: FR1.1, NFR1.1_

- [ ] 3.2 タイマー数値表示の色調整
  - タイマー数値のテキスト色を#2e7d32から#1b5e20に変更
  - 背景色をrgba(46, 125, 50, 0.1)からrgba(27, 94, 32, 0.15)に変更
  - コントラスト比4.5:1以上を確保
  - _Requirements: FR3.1, NFR1.1_

- [ ] 4. コントロールボタンのコントラストを向上させる
- [ ] 4.1 次のプレイヤーへボタンの背景色調整
  - ボタン背景色を#2e7d32から#1b5e20に変更（2箇所）
  - 白色テキストとのコントラスト比を向上
  - 固定ヘッダーと主要操作セクションの両方を変更
  - _Requirements: FR4.1_

- [ ] 4.2 一時停止ボタンの背景色調整
  - ボタン背景色を#ff9800から#ef6c00に変更
  - 白色テキストとのコントラスト比を向上
  - _Requirements: FR4.1_

## Phase 3: アクセシビリティ検証とテスト

- [ ] 5. コントラスト比検証テストを作成する
- [ ] 5.1 WCAG 2.1 AAレベルのコントラスト比検証関数を実装
  - コントラスト比計算関数を作成（相対輝度計算含む）
  - 4.5:1以上の基準を満たすかチェックする関数を作成
  - _Requirements: NFR1.1_

- [ ] 5.2 プレイヤーカードのコントラスト比テストを作成
  - アクティブカード（#1976d2背景 + #ffffff前景）の検証
  - 非アクティブカード（#ffffff背景 + #212121前景）の検証
  - 全てのテストが4.5:1以上を確認
  - _Requirements: FR1.1, FR2.1, FR2.2_

- [ ] 5.3 ゲームタイマーUIのコントラスト比テストを作成
  - 固定ヘッダーのプレイヤー名（#0d47a1）の検証
  - タイマー数値（#1b5e20）の検証
  - ボタン背景色（#1b5e20、#ef6c00）と白テキストの検証
  - _Requirements: FR3.1, FR4.1_

- [ ] 6. E2Eテストで視覚的回帰を検証する
- [ ] 6.1 ゲーム進行中のUI視認性テストを作成
  - ゲームを開始してアクティブプレイヤーを設定
  - アクティブプレイヤーカードのスクリーンショットを撮影
  - 非アクティブプレイヤーカードのスクリーンショットを撮影
  - タイマー表示とコントロールボタンのスクリーンショットを撮影
  - _Requirements: FR1.2, FR2.1, FR3.2, FR4.1_

- [ ] 6.2 Playwright Accessibilityツールで自動検証
  - WCAG基準違反がないことを確認
  - コントラスト比の自動検証を実施
  - _Requirements: NFR1.1_

## Phase 4: パフォーマンス検証と最終確認

- [ ] 7. レンダリングパフォーマンスを検証する
- [ ] 7.1 CSS変更前後のフレームレート測定
  - Chrome DevTools Performanceタブでプロファイリング
  - ゲーム進行中のフレームレートが60fps以上を維持することを確認
  - _Requirements: NFR3.1_

- [ ] 7.2 Lighthouseでアクセシビリティスコアを検証
  - アクセシビリティスコアが90点以上であることを確認
  - コントラスト比の問題が報告されないことを確認
  - _Requirements: NFR1.1_

- [ ] 8. 全画面サイズでの視認性を確認する
- [ ] 8.1 レスポンシブデザインの検証
  - モバイル（375px）での表示を確認
  - タブレット（768px）での表示を確認
  - デスクトップ（1024px以上）での表示を確認
  - 全ての画面サイズで視認性が維持されることを確認
  - _Requirements: NFR2.2_

- [ ] 9. 実装完了処理を実施する
- [ ] 9.1 全テスト結果の確認
  - 全てのユニットテストが成功していることを確認
  - 全てのE2Eテストが成功していることを確認
  - エラーや予期しない動作が発生しないことを確認
  - _Requirements: 全要件_

- [ ] 9.2 spec.json更新とコミット作成
  - spec.jsonのphaseを"implementation-done"に更新
  - tasks.mdの全タスクをチェック済み[x]に更新
  - 詳細なコミットメッセージを作成（実装内容、テスト結果含む）
  - Gitコミット作成（実装完了の最終コミット）
  - _Requirements: 全要件_

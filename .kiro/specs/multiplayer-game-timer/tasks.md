# 実装計画

## 完了済みタスク（証跡保持）

以下のタスクは既に実装完了しています。

- [x] 1. プロジェクト基盤のセットアップ
  - フロントエンドプロジェクトをReact 18 + TypeScript + Viteで初期化
  - Azure Static Web Appsのデプロイ設定(GitHub Actions CI/CD統合)
  - _要件: 6.1, 6.2_

- [x] 2. コアデータモデルと型定義の実装
  - GameStateインターフェース(プレイヤー配列、アクティブID、一時停止状態、タイマーモード)の定義
  - Playerインターフェース(ID、名前、経過時間、初期時間、アクティブ状態)の定義
  - タイマーモード('count-up' | 'count-down')の型定義とデフォルト値設定
  - ビジネスルール検証関数(プレイヤー数4-6、経過時間非負、アクティブプレイヤー最大1人)の実装
  - _要件: 1.1, 1.2, 2.2_

- [x] 3. フロントエンドReactコンポーネントの実装
- [x] 3.1 GameTimerルートコンポーネント
  - GameTimerStateの状態管理(useState, useEffectによる初期化)
  - 状態更新ロジック
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [x] 3.2 PlayerListコンポーネント
  - プレイヤー一覧の表示(プレイヤー名、タイマー値)
  - アクティブプレイヤーのビジュアルハイライト(CSSクラス切り替え)
  - タイマー値のMM:SS形式フォーマット関数
  - カウントダウンモードでの時間切れ視覚通知(赤色表示等)
  - _要件: 1.4, 2.1, 2.7, 3.2_

- [x] 3.3 TimerControlsコンポーネント
  - ターン切り替えボタン(次のプレイヤーへ)の実装
  - 一時停止/再開ボタンの実装
  - リセットボタンの実装
  - プレイヤー数変更UI(4-6人の範囲選択)
  - タイマーモード切り替えボタン(カウントアップ/ダウン)
  - カウントダウンモード時の初期時間設定入力フィールド
  - _要件: 1.2, 2.2, 3.3, 4.1, 4.2, 4.3, 4.4_

- [x] 3.4 クライアントサイドタイマーロジック
  - 1秒ごとのタイマー更新(setInterval)
  - カウントアップモード: 経過時間+1秒
  - カウントダウンモード: 残り時間-1秒
  - カウントダウンモードでの0:00到達時の停止処理
  - _要件: 2.3, 2.4, 2.5, 2.7_

---

## Phase 1: インメモリータイマー実装

**目標**: React `useState`のみを使用した基本タイマー機能の実装と動作検証。タイマーロジックとUI/UXを確立。

### Phase 1 準備タスク

- [x] 9. Phase 1への移行準備とクリーンアップ（完了）
  - 不要な依存関係の整理
  - フロントエンド専用構成への最適化
  - _要件: なし（技術的準備）_

### Phase 1 コア実装

- [ ] 10. インメモリー状態管理の実装
- [x] 10.1 GameStateのuseState実装
  - プレイヤー配列、アクティブプレイヤーID、タイマーモード、一時停止状態を`useState`で管理
  - デフォルト状態（4人プレイヤー、カウントアップモード）の初期化
  - プレイヤー数変更機能（4〜6人）の実装
  - _要件: 1.1, 1.2, 1.3, 1.4, 2.2_

- [x] 10.2 タイマーロジックの実装
  - `setInterval`による1秒ごとのタイマー更新
  - カウントアップモード: 経過時間+1秒
  - カウントダウンモード: 残り時間-1秒、0:00で停止
  - アクティブプレイヤーのみタイマー動作（排他制御）
  - _要件: 2.3, 2.4, 2.5, 2.7_

- [x] 10.3 ターン管理機能の実装
  - ターン切り替えボタン: 現在プレイヤー停止 → 次プレイヤー開始
  - 最後のプレイヤーから最初のプレイヤーへの循環処理
  - アクティブプレイヤーの視覚的ハイライト表示
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 10.4 ゲームコントロール機能の実装
  - リセットボタン: 全プレイヤーのタイマーを初期値にリセット
  - 一時停止/再開ボタン: アクティブタイマーの一時停止と再開
  - タイマーモード切り替え（カウントアップ/カウントダウン）
  - カウントダウンモード時の初期時間設定UI
  - _要件: 2.2, 2.4, 2.6, 2.8, 4.1, 4.2, 4.3, 4.4_

### Phase 1 UI/UX実装

- [x] 11. レスポンシブデザインの実装
  - CSS GridとMedia Queriesによるレイアウト定義
  - スマートフォン(375px以下): 縦スクロール可能な単列レイアウト
  - タブレット(768px以上): 2列グリッドレイアウト
  - PC(1024px以上): 3-4列グリッドレイアウト
  - ボタンとタイマー表示の読みやすいフォントサイズ設定
  - _要件: 6.1, 6.2, 6.3, 6.4_

- [x] 12. UI改善とユーザビリティ向上
  - タイマー値のMM:SS形式フォーマット表示
  - カウントダウンモードでの時間切れ視覚通知（赤色表示、アニメーション）
  - 無効な操作の防止（他プレイヤーのターン中のボタン無効化）
  - プレイヤー数変更時の入力バリデーション（4〜6人範囲チェック）
  - _要件: 1.2, 2.1, 2.7_

### Phase 1 テストとデプロイ

- [ ] 13. Phase 1ユニットテストの実装
- [ ] 13.1 タイマーロジックのテスト
  - カウントアップモードのタイマー動作テスト
  - カウントダウンモードのタイマー動作テスト（0:00到達含む）
  - 一時停止/再開機能のテスト
  - リセット機能のテスト
  - _要件: 2.3, 2.4, 2.5, 2.6, 2.7, 2.8_

- [ ] 13.2 ターン管理ロジックのテスト
  - ターン切り替え機能のテスト（循環処理含む）
  - アクティブプレイヤー排他制御のテスト
  - プレイヤー数変更時の状態更新テスト
  - _要件: 1.2, 3.1, 3.2, 3.3, 3.4_

- [ ] 13.3 UIコンポーネントのテスト
  - PlayerListコンポーネントのレンダリングテスト
  - TimerControlsコンポーネントのボタン動作テスト
  - レスポンシブレイアウトの表示テスト
  - _要件: 1.4, 2.1, 6.1, 6.2, 6.3, 6.4_

- [ ] 14. Phase 1 デプロイと動作確認
- [ ] 14.1 ローカル環境での動作検証
  - ブラウザでの基本操作フロー確認（タイマー開始→停止→ターン切り替え→リセット）
  - レスポンシブデザインの表示確認（モバイル、タブレット、PC）
  - タイマーモード切り替え動作確認
  - _要件: 全Phase 1要件_

- [ ] 14.2 Phase 1本番デプロイ
  - Azure Static Web Appsへのフロントエンドのみデプロイ
  - パブリックURLからのアクセステスト
  - 複数デバイスからの動作確認（同期なし、各デバイス独立動作）
  - _要件: 7.1, 7.2_

